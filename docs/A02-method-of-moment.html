<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.629">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction to Machine Learning for Economists (Under Construction) - Appendix B — Primer on method of moment</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./A01-mc-simulation.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<link href="style.css" rel="stylesheet" type="text/css">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-45VKT2HZSL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-45VKT2HZSL');
</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Appendix B — Primer on method of moment</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to Machine Learning for Economists (Under Construction)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/tmieno2/ML-Economist" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./H00-preface.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Basics</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./B01-nonlinear.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Non-linear function estimation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./B02-bias-variance-tradeoff.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bias-variance Trade-off</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./B03-cross-validation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Cross-validation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./B04-regularization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Regression Shrinkage Methods</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./B05-bootstrap.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Bootstrap</span></a>
  </div>
</li>
    </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Prediction ML</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./P01-random-forest.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Random Forest</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./P02-boosted-regression-forest.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Boosted Regression Forest</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./P03-xgb.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Extreme Gradient Boosting</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./P04-local-linear-forest.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">LLF</span></a>
  </div>
</li>
    </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./C0P-causal-ml.html" class="sidebar-item-text sidebar-link">Causal Machine Learning (CML) Methods</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./C00-why-not-this.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Why can’t we just do this?</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./C01-dml.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Double Machine Learning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./C02-r-learner.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">S-, X-, T-, and R-learner</span></a>
  </div>
</li>
    </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./E0P-extensions.html" class="sidebar-item-text sidebar-link">Extensions</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./E01-spatial-cv.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Spatial Cross-validation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./E02-grf.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Generalized Random Forest</span></a>
  </div>
</li>
    </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./PROG-00-programming.html" class="sidebar-item-text sidebar-link">Programming Guide</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./PROG-01-mlr3.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Machine Learning with <code>mlr3</code> in R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./PROG-02-reticulate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Running Python from R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./PROG-03-model-selection-prediction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Model Selection (Prediction)</span></a>
  </div>
</li>
    </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">Appendices</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A01-mc-simulation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Monte Carlo (MC) Simulation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A02-method-of-moment.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Primer on method of moment</span></a>
  </div>
</li>
    </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#moments" id="toc-moments" class="nav-link active" data-scroll-target="#moments"> <span class="header-section-number">B.1</span> Moments</a></li>
  <li><a href="#method-of-moments-estimator" id="toc-method-of-moments-estimator" class="nav-link" data-scroll-target="#method-of-moments-estimator"> <span class="header-section-number">B.2</span> Method of moments estimator</a>
  <ul class="collapse">
  <li><a href="#simple-example" id="toc-simple-example" class="nav-link" data-scroll-target="#simple-example"> <span class="header-section-number">B.2.1</span> Simple example</a></li>
  <li><a href="#method-of-moments-to-estimate-a-linear-in-parameter-model" id="toc-method-of-moments-to-estimate-a-linear-in-parameter-model" class="nav-link" data-scroll-target="#method-of-moments-to-estimate-a-linear-in-parameter-model"> <span class="header-section-number">B.2.2</span> Method of moments to estimate a linear-in-parameter model</a></li>
  <li><a href="#instrumental-variable-approach-as-a-method-of-moment-estimator" id="toc-instrumental-variable-approach-as-a-method-of-moment-estimator" class="nav-link" data-scroll-target="#instrumental-variable-approach-as-a-method-of-moment-estimator"> <span class="header-section-number">B.2.3</span> Instrumental variable approach as a method of moment estimator</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/tmieno2/ML-Economist/edit/master/A02-method-of-moment.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Appendix B — Primer on method of moment</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>Method of moment is a class of statistical methods that derive estimators from moment conditions. We will go over the basic concepts of method of moments here because it will help us understand how double machine learning methods.</p>
<section id="moments" class="level2" data-number="B.1">
<h2 data-number="B.1" class="anchored" data-anchor-id="moments"><span class="header-section-number">B.1</span> Moments</h2>
<p>Let’s first review what moments are.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Definition
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math inline">\(n\)</span>th <span style="color:blue">raw </span>moment of a random variable <span class="math inline">\(x\)</span> (denoted as <span class="math inline">\(\mu_n\)</span>) is defined as</p>
<p><span class="math display">\[
\begin{aligned}
\mu_n = E[x^n]
\end{aligned}
\]</span></p>
<p><span class="math inline">\(n\)</span>th <span style="color:blue">central </span>moment of a random variable <span class="math inline">\(x\)</span> (denoted as <span class="math inline">\(\mu_n'\)</span>) is defined as</p>
<p><span class="math display">\[
\begin{aligned}
\mu_n' = E[(x-\mu)^n]
\end{aligned}
\]</span></p>
</div>
</div>
<p>The statistics that we use all the time, expected value and variance of <span class="math inline">\(x\)</span>, are the 1st raw moment of <span class="math inline">\(x\)</span> and second central moment of <span class="math inline">\(x\)</span>, respectively.</p>
<p><span class="math display">\[
\begin{aligned}
\mu_1  &amp; = E[x] \\
\mu_2' &amp; = E[(x-\mu_1)^2]
\end{aligned}
\]</span></p>
<p><span style="color:blue">Sample analogs </span> of moments are defined as follows:</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Sample analog of moment conditions
</div>
</div>
<div class="callout-body-container callout-body">
<p>Suppose you have <span class="math inline">\(N\)</span> realized values of a random variable <span class="math inline">\(x\)</span> (<span class="math inline">\(x_1, x_2, \dots, x_N\)</span>), then the sample analog of <span class="math inline">\(n\)</span>th raw and central moments are</p>
<p><span class="math display">\[
\begin{aligned}
\mu_n = E[x^n] &amp; \Rightarrow \frac{1}{n}\sum_{i=1}^N x_i^n \\
\mu_n' = E[(x-\mu_1)^n] &amp; \Rightarrow \frac{1}{n} \sum_{i=1}^N (x_i-\bar{x})^n
\end{aligned}
\]</span></p>
<p>, respectively.</p>
</div>
</div>
<!-- 
#/*----------------------------------*/
#' ## Method of moments estimator
#/*----------------------------------*/
-->
</section>
<section id="method-of-moments-estimator" class="level2 page-columns page-full" data-number="B.2">
<h2 data-number="B.2" class="anchored" data-anchor-id="method-of-moments-estimator"><span class="header-section-number">B.2</span> Method of moments estimator</h2>
<p>In general, method of moments work like this.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Method of moments in general
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><ol type="1">
<li>For the given statistics of interest (say, <span class="math inline">\(\theta\)</span>), write equations that define <span class="math inline">\(\theta\)</span> using moments either implicitly or explicitly.</li>
</ol></li>
<li><ol start="2" type="1">
<li>Replace the moment conditions with their sample analogs</li>
</ol></li>
<li><ol start="3" type="1">
<li>Solve for <span class="math inline">\(\theta\)</span></li>
</ol></li>
</ul>
</div>
</div>
<p>It is best to see some examples to understand this better.</p>
<section id="simple-example" class="level3" data-number="B.2.1">
<h3 data-number="B.2.1" class="anchored" data-anchor-id="simple-example"><span class="header-section-number">B.2.1</span> Simple example</h3>
<p>We would like to estimate the expected value of a random variable <span class="math inline">\(x\)</span>.</p>
<p><span style="color:blue">Step 1</span>: In this example, the statistics of interest (<span class="math inline">\(\theta\)</span>) is the expected value of a random variable <span class="math inline">\(x\)</span>. The moment condition is simply</p>
<p><span class="math display">\[
\begin{aligned}
\theta = E[x]
\end{aligned}
\]</span></p>
<p><span style="color:blue">Step 2</span>: The sample analog of <span class="math inline">\(E[x]\)</span> is <span class="math inline">\(\frac{1}{n}\sum_{i=1}^N x_i\)</span>. So,</p>
<p><span class="math display">\[
\begin{aligned}
\theta = \frac{1}{n}\sum_{i=1}^N x_i
\end{aligned}
\]</span></p>
<p><span style="color:blue">Step 3</span>: Well, the equation is already solve with respect to <span class="math inline">\(\theta\)</span>.</p>
<p>The method of moment estimator of the expected value of a random variable is sample mean (<span class="math inline">\(\frac{1}{n}\sum_{i=1}^N x_i\)</span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(N)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>theta_hat_mm <span class="ot">&lt;-</span> <span class="fu">mean</span>(x)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.06022363</code></pre>
</div>
</div>
</section>
<section id="method-of-moments-to-estimate-a-linear-in-parameter-model" class="level3 page-columns page-full" data-number="B.2.2">
<h3 data-number="B.2.2" class="anchored" data-anchor-id="method-of-moments-to-estimate-a-linear-in-parameter-model"><span class="header-section-number">B.2.2</span> Method of moments to estimate a linear-in-parameter model</h3>
<p>Now, let’s look at an estimation task that is more familiar and relevant to our work: estimating the coefficients of a linear model.</p>
<p>Consider the following liner model.</p>
<p><span id="eq-ols-model"><span class="math display">\[
\begin{aligned}
y = \alpha + \beta x + \mu
\end{aligned}
\tag{B.1}\]</span></span></p>
<p>By the assumption of zero conditional mean (<span class="math inline">\(E[\mu|X] = 0\)</span>), where <span class="math inline">\(X = \{1, x\}\)</span> (the intercept and <span class="math inline">\(x\)</span>), the following hold as the moment conditions for this problem:</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><span class="math display">\[
\begin{aligned}
E[\mu \cdot x] &amp; = E_x[E_{\mu}[\mu \cdot x|x]] \\
             &amp; = E_x[xE_{\mu}[\mu|x]] \\
             &amp; = E_x[x\cdot 0] \;\; \mbox{(by the assumption)} \\
             &amp; = 0
\end{aligned}
\]</span></p>
</div></div><p><span id="eq-mm-ols"><span class="math display">\[
\begin{aligned}
E[\mu\cdot 1] &amp; = 0\\
E[\mu\cdot x] &amp; = 0
\end{aligned}
\tag{B.2}\]</span></span></p>
<p>From <a href="#eq-ols-model">Equation&nbsp;<span>B.1</span></a>, we can see that <span class="math inline">\(\mu = y - \alpha + \beta x\)</span>. Substituting this into <a href="#eq-mm-ols">Equation&nbsp;<span>B.2</span></a>,</p>
<p><span id="eq-mm-ols-detailed"><span class="math display">\[
\begin{aligned}
E[(y - \alpha + \beta x)\cdot 1] &amp; = 0\\
E[(y - \alpha + \beta x)\cdot x] &amp; = 0
\end{aligned}
\tag{B.3}\]</span></span></p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Terminology alert: <span style="color:blue"> Score function </span>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Score function is a function of parameters to estimate inside <span class="math inline">\(E[]\)</span> of the moment conditions. <span class="math inline">\(\Psi(\cdot)\)</span> is often used to represent a score function.</p>
<p>So, the score functions in <a href="#eq-mm-ols-detailed">Equation&nbsp;<span>B.3</span></a> are</p>
<ul>
<li><span class="math inline">\(\Psi_1(\alpha, \beta) = y - \alpha + \beta x\)</span></li>
<li><span class="math inline">\(\Psi_2(\alpha, \beta) = (y - \alpha + \beta x)\cdot x\)</span></li>
</ul>
<p>for the first and second moment conditions.</p>
</div>
</div>
<p>Now, the sample analogs of these moment conditions are,</p>
<p><span class="math display">\[
\begin{aligned}
\sum_{i=1}^N(y_i - \alpha + \beta x_i) &amp; = 0\\
\sum_{i=1}^N(y_i - \alpha + \beta x_i)\cdot x_i &amp; = 0
\end{aligned}
\]</span></p>
<p>Do these look familiar to you? They should be because they are identical to the first order conditions of OLS. Solving the equations,</p>
<p><span class="math display">\[
\begin{aligned}
\hat{\alpha}_{mm} &amp; = \frac{1}{N}\sum_{i=1}^N y_i \\
\hat{\beta}_{mm} &amp; = \frac{\sum_{i=1}^N (y_i-\bar{y})(x_i - \bar{x})}{\sum_{i=1}^N (x_i-\bar{x})^2}
\end{aligned}
\]</span></p>
</section>
<section id="instrumental-variable-approach-as-a-method-of-moment-estimator" class="level3" data-number="B.2.3">
<h3 data-number="B.2.3" class="anchored" data-anchor-id="instrumental-variable-approach-as-a-method-of-moment-estimator"><span class="header-section-number">B.2.3</span> Instrumental variable approach as a method of moment estimator</h3>
<p>Now, consider the following model,</p>
<p><span class="math display">\[
\begin{aligned}
y = \alpha + \beta x + \mu
\end{aligned}
\]</span></p>
<p>where <span class="math inline">\(E[\mu|x] = f(x)\)</span>. So, <span class="math inline">\(x\)</span> is endogenous. Fortunately, we have found an external instrument <span class="math inline">\(z\)</span> such that <span class="math inline">\(E[u|z] = 0\)</span> and <span class="math inline">\(z\)</span> has explanatory power on <span class="math inline">\(x\)</span> (<span class="math inline">\(z\)</span> is not a weak instrument). According to these assumptions, we can write the following moment conditions:</p>
<p><span id="eq-mm-iv"><span class="math display">\[
\begin{aligned}
E[\mu\cdot 1] &amp; = 0 \;\; \mbox{(w.r.t to the intercept)}\\
E[\mu\cdot z] &amp; = 0
\end{aligned}
\tag{B.4}\]</span></span></p>
<p>The key difference from the previous case is that we are not using <span class="math inline">\(E[\mu\cdot x] = 0\)</span> because we believe that this moment condition is not satisfied. Instead, we are using <span class="math inline">\(E[\mu\cdot z] = 0\)</span> because we believe this condition is satisfied.</p>
<p>Substituting <span class="math inline">\(\mu = y - \alpha + \beta x\)</span> into <a href="#eq-mm-iv">Equation&nbsp;<span>B.4</span></a>,</p>
<p><span class="math display">\[
\begin{aligned}
E[(y-\alpha + \beta x)\cdot 1] &amp; = 0 \\
E[(y-\alpha + \beta x)\cdot z] &amp; = 0
\end{aligned}
\]</span></p>
<p>The sample analogs of these conditions are,</p>
<p><span class="math display">\[
\begin{aligned}
\sum_{i=1}^N(y_i - \alpha + \beta x_i) &amp; = 0\\
\sum_{i=1}^N(y_i - \alpha + \beta x_i)\cdot z_i &amp; = 0
\end{aligned}
\]</span></p>
<p>Now, we can solve these conditions with respect to <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span>, which are instrumental variable estimators.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./A01-mc-simulation.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Monte Carlo (MC) Simulation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>